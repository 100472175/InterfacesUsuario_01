<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<form>
  <label for="name">Nombre:</label><br>
  <input type="text" id="name" name="name" value=""><br>

  <label for="surname">Apellido:</label><br>
  <input type="text" id="surname" name="surname" value=""><br>

  <label for="dni">DNI:</label><br>
  <input type="text" id="dni" name="dni" value=""><br>

  <label for="tlf">Teléfono móvil:</label><br>
  <input type="text" id="tlf" name="tlf" value=""><br><br>

  <label for="mail">Email:</label><br>
  <input type="text" id="mail" name="mail" value=""><br><br>

  <input type="reset" value="Reset"
         style="background-color: cadetblue;
                        color: white" />
  <input type="submit" value="Submit"
         style="background-color: green;
                        color: white";
         onclick="createAccount()" />

  <input type="button" value="Cancel"
         onclick="window.location.href='landing.html'"
        style="background-color: red;
                         color: white;" />


</form>

</body>
<script>

  function getCookie(dni) {
    let name = id + "=";
    let decodedCookie = decodeURIComponent(document.cookie);
    let ca = decodedCookie.split(';');
    for(let i = 0; i < ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(dni) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
    alert(document.cookie)
  }

  function setCookie(dni,exdays) {
    let name = document.getElementById("name").value;
    let surname = document.getElementById("surname").value;
    let tlf = document.getElementById("tlf").value;
    let mail = document.getElementById("mail").value;

    const d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    let expires = "expires=" + d.toUTCString();
    document.cookie = "id" + dni + "name=" + name + "surname" + surname + "tfl" + tlf + "mail" + mail + ";path=/";
    alert(document.cookie)
  }


  function createAccount() {
    // Ger the information from the precious form from inputs:
    let dni = document.getElementById("dni").value;

    // Check if the cookie exists:
    if (getCookie("dni") !== "") {
      alert("Ya existe una cuenta con este DNI");
      console.log("Ya existe una cuenta con este DNI")
    } else {
      // Create a cookie with the information:
      console.log("Creación de cuenta");
      alert("Creación de cuenta");
      setCookie(dni, 30);
      alert("Cookie creada");
    }
    alert(document.cookie)
    console.log(document.cookie)



  }
</script>
</html>